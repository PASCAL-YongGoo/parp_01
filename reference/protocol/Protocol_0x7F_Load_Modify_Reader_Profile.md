### 0x7f Load/Modify Reader Profile Command

이 명령어는 리더기의 내부 프로파일 설정을 수정하거나 현재 설정된 프로파일을 불러오는 데 사용됩니다. 프로파일은 통신 속도와 관련된 Tari, 변조 방식(Modulation), 주파수 등의 조합을 미리 정의해 둔 것입니다. 기본 프로파일은 1번입니다.

#### 1. 요청 프레임 (PC → E310)

**프레임 구조:**

| Len | Adr | Cmd | Data[] | CRC-16 (LSB) | CRC-16 (MSB) |
| :-- | :-- | :-- | :-- | :--- | :--- |
| 5 | 1 | 1 | 1 | 1 | 1 |

**필드 설명:**

| 필드 | 길이 (Byte) | 설명 |
| :--- | :--- | :--- |
| `Len` | 1 | `0x05`. |
| `Adr` | 1 | 리더기 주소 (0x00 ~ 0xFE). 0xFF는 브로드캐스트. |
| `Cmd` | 1 | 명령어 코드. `0x7f`로 고정. |
| `Data[]`| 1 | 프로파일 설정 값. 아래 "Data[] 필드 포맷" 참조. |
| `CRC-16`| 2 | `Len`부터 `Data[]`까지의 CRC-16 체크섬. |

**Data[] 필드 포맷:**

| profile |
| :--- |
| 1 |

**Data[] 파라미터 설명:**

| 파라미터 | 길이 (Byte) | 설명 |
| :--- | :--- | :--- |
| `profile`| 1 | **bit 7 (동작 플래그):** <br> `0`: 현재 프로파일 번호 불러오기. <br> `1`: 새로운 프로파일 번호로 수정. <br> **bit 6 (저장 플래그):** <br> `0`: 전원 꺼져도 설정 저장. <br> `1`: 저장 안 함. <br> **bit 5-0 (프로파일 번호):** <br> `bit 7`이 `1`일 때, 설정할 새로운 프로파일 번호 (유효 범위: 0~3). |

**프로파일 목록 (R2000 기준):**
- **Profile0:** Tari 25uS, FM0 40KHz
- **Profile1:** Tari 25uS, Miller 4 250KHz (기본값)
- **Profile2:** Tari 25uS, Miller 4 300KHz
- **Profile3:** Tari 6.25uS, FM0 400KHz

---

#### 2. 응답 프레임 (E310 → PC)

**프레임 구조:**

| Len | Adr | reCmd | Status | Data[] | CRC-16 (LSB) | CRC-16 (MSB) |
| :-- | :-- | :--- | :--- | :--- | :--- | :--- |
| 6 | 1 | 1 | 1 | 1 | 1 | 1 |

**필드 설명:**

| 필드 | 길이 (Byte) | 설명 |
| :--- | :--- | :--- |
| `Len` | 1 | `0x06`. |
| `Adr` | 1 | 리더기 주소. |
| `reCmd` | 1 | 응답하는 명령어 코드. `0x7f`로 고정. |
| `Status`| 1 | 명령어 실행 상태. 성공 시 `0x00`. |
| `Data[]`| 1 | 현재 설정된 프로파일 정보. 아래 "Data[] 필드 포맷" 참조. |
| `CRC-16`| 2 | `Len`부터 `Data[]`까지의 CRC-16 체크섬. |

**응답 Data[] 필드 포맷:**

| profile |
| :--- |
| 1 |

**응답 Data[] 파라미터 설명:**

| 파라미터 | 길이 (Byte) | 설명 |
| :--- | :--- | :--- |
| `profile`| 1 | **bit 7:** 예약됨 (기본값 0). <br> **bit 6-0:** 현재 설정된 프로파일 번호 (0~3). |
